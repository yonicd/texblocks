---
output: github_document
always_allow_html: yes
---

<!-- README.md is generated from README.Rmd. Please edit that file -->
[![Build Status](https://travis.metrumrg.com/yoni/texblocks.svg?token=tfrDuc83e84K9CqJKyCs&branch=master)](https://travis.metrumrg.com/yoni/texblocks)
```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "tools/README",
  warning = FALSE,
  message = FALSE
)
```

# Load Library

```{r}
library(texblocks)
library(texPreview)

```
 
```{r,include=FALSE}
tex_opts$set(returnType= 'html',
             resizebox = FALSE,
             fileDir = 'tools/README',
             opts.html = list(width='25%',height='25%'))

tex_opts$append(list(cleanup='tex'))
```

# Initialize basic texblocks

## Single blocks

```{r}
x <- as.tb('$\\alpha$')
y <- as.tb('aaa')
z <- as.tb('bbb')

```

## Vectors

```{r}
k1 <- lapply(1:3,as.tb)
k2 <- lapply(4:6,as.tb)

```

# Operators 

## Horizontal Concatentation

```{r}
x1 <- x+y+z
x1
```

## Vertical Concatentation

```{r}
x/y
x-y
```

# Creating a tabular object

```{r}
texblocks::tabular( x1 ,align = 'c|c|c')
```

# Compiling with texPreview

```{r, echo=TRUE,results='asis'}
texPreview::texPreview(tabular(x1 ,'c|c|c'),stem = "tb1")

```

## Combining blocks

```{r}
x1 + x1
```
 
```{r}
x2 <- x1 / x1
x2 + x2
```
 
```{r, echo=TRUE,results='asis'}
texPreview::texPreview(tabular(x2 ,'c|c|c'),stem = "tb2")

```

## Unequal blocks
 
```{r}
x3 <- x2/x2
x2 + x3
```

```{r, echo=TRUE,results='asis'}
texPreview::texPreview(tabular(x3 ,'c|c|c'),stem = "tb3")

```

```{r, echo=TRUE,results='asis'}
texPreview::texPreview(tabular(x2-x2 ,'c|c|c'),stem = "tb4")

```
 
```{r, echo=TRUE,results='asis'}
texPreview::texPreview(tabular(x2 + x3 ,'c|c|c|c|c|c'),stem = "tb5")

```
 
```{r, echo=TRUE,results='asis'}
texPreview::texPreview(tabular(x3 + x3,'c|c|c|c|c|c'),stem = "tb6")

```

## Reducing vectors

```{r}
k <- purrr::reduce(k1,`+`) / purrr::reduce(k2,`+`)
k
```

```{r, echo=TRUE,results='asis'}
texPreview::texPreview(tabular(k,'ccc'),stem = "tb7")

``` 

# Converting to a data.frame

```{r}
as.data.frame( x2 + x3 )
```


```{r, echo=TRUE,results='asis'}

title <- c('param',sprintf('col%s',1:5))%>%
  purrr::map(as.tb)%>%
  purrr::reduce(`+`)

texPreview::texPreview(tabular(title-(x2+x3) ,'|c|ccccc|'),stem = "tb8")

```

```{r,echo=TRUE,results='asis'}
title <- as.tb('param')+multicol('vals',3,'c|')

tab <- title-(multirow('$\\beta$',2) + k)

texPreview::texPreview(tabular(tab,'|cccc|'),stem='tb9')

```

```{r,include=FALSE}
file.copy('tools',to = 'docs',overwrite = TRUE,recursive = TRUE)
```